# Project Rules

## Tech Stack & Environment
- Framework: Next.js (App Router), React
- Language: TypeScript (.ts, .tsx)
- Database: Supabase (PostgreSQL)
- Style: Tailwind CSS
- Shell: Windows PowerShell (Use `;` for chain, avoid Linux commands like `export`, `rm -rf`)

## AI Behavior & Cost Saving
- **No New Docs:** 新機能のために新しいMarkdownファイル(.md)を作成しないでください。計画はチャット内で行ってください。
- **Code Focused:** 日本語の長文解説よりも、実際のコード変更を優先して提示してください。
- **Existing Files:** 既存の `PROJECT_ARCHITECTURE_GUIDE.md` は、アーキテクチャに大きな変更がある場合のみ更新してください。

## Error Prevention
- **Type Safety:** コード変更時は必ず型チェックを意識し、`any`型を避けてください。
- **Build Verification:** 提案するコードは、ビルドが通る整合性の取れたものであることを確認してください。
- **PowerShell:** コマンド提案時はPowerShell構文を使用してください。

## Communication
- すべて日本語で応答してください。
- コード内のコメントも日本語で記述してください。

## Self-Improvement & Rule Maintenance
- **Propose Updates:** エラー修正やトラブルシューティングが完了した後、もしその原因が「コンテキスト不足」や「曖昧な指示」にあった場合、今後同じミスを防ぐためにこの `.cursorrules` に追記すべきルールを提案してください。
- **Format:** 提案がある場合は、回答の最後に「【.cursorrulesへの追加提案】」として別枠で表示してください。

## Verification Strategy
- **Routine Check:** 通常のコード修正後は `npm run build` を実行せず、`npx tsc --noEmit` で型整合性のみを確認してください。
- **Pre-Push Check:** 大きなタスクの完了時や、Gitへプッシュする直前のみ、`npm run build` を実行してVercelデプロイ時の失敗を防いでください。

## Error Handling & Debugging
- **Read Terminal:** ビルドエラーや実行時エラーが発生した場合、ユーザーからのコピペを待たずに、自動的にターミナルの出力を分析して修正案を提示してください。
- **Root Cause:** エラー修正時は、単にエラーを消すだけでなく「なぜそのエラーが起きたか」の根本原因を日本語で簡潔に説明してください。